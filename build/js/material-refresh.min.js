(function(){"use strict";!function(e){function t(t){t=t||{},v=t.scrollEl?t.scrollEl:X?v:document,h=e(v),E=t.onRotateBegin,j=t.onRotateEnd,D=t.maxRotateTime||D,0===e("#muiRefresh").length&&(o(),l=e("#muiRefresh"),d=e(".mui-spinner-wrapper",l),f=e(".mui-arrow-wrapper",l),m=e(".mui-arrow-main",l)),u()}function o(){e(document.body)[0].insertAdjacentHTML("beforeend",A)}function n(e){B.top=X&&v==document.body?window.scrollY:document.body.scrollTop,B.top>0||y||(p=b,l.show(),e.touches[0]&&(B.x1=e.touches[0].pageX,R=B.y1=e.touches[0].pageY))}function i(e){var t,o,n=(new Date).getTime();if(!(B.top>0||y)&&e.touches&&1===e.touches.length){if(t=e.touches[0],B.x2=t.pageX,B.y2=t.pageY,o=B.y2-B.y1,B.y2>R+k){if(e.preventDefault(),e.stopPropagation(),!X&&80>n-P)return;if(!(Y>p))return void r();p+=o,l.css("-webkit-transform","translateY("+p+"px)"),m.css("-webkit-transform","rotate("+-(3*p)+"deg)")}B.y1=t.pageY,P=n}}function s(e){return B.top>0||y?!1:(e.preventDefault(),e.stopPropagation(),void(p>T?r():(l.css("-webkit-transform","translateY("+b+"px)"),l.css("transform","translateY("+b+"px)"))))}function r(){y=!0,"function"==typeof E&&E(),l.css("-webkit-transform","translateY("+x+"px)"),l.css("transform","translateY("+x+"px)"),f.hide(),d.show(),C=setTimeout(a,D)}function a(){g=!0,l.addClass(w),d.hide(),setTimeout(function(){l.removeClass(w),l.hide(),l.css("-webkit-transform","translateY("+b+"px)"),l.css("transform","translateY("+b+"px)"),f.show(),y=!1,g=!1,"function"==typeof j&&j()},500)}function u(){h.on("touchstart",n),h.on("touchmove",i),h.on("touchend",s)}function c(){h.off("touchstart",n),h.off("touchmove",i),h.off("touchend",s)}var l,d,f,m,p,h=e(document.body),v=document.body,w="mui-refresh-noshow",y=!1,g=!1,b=-70,x=0,Y=65,T=-25,R=0,k=2,D=3e3,E=null,j=null,C=null,P=(new Date).getTime(),X=e.os.ios,A='<div id="muiRefresh" class="mui-refresh-main mui-blue-theme">            <div class="mui-refresh-wrapper ">                <div class="mui-arrow-wrapper">                    <div class="mui-arrow-main"></div>                </div>                <div class="mui-spinner-wrapper" style="display:none;">                    <div class="mui-spinner-main" >                        <div class="mui-spinner-left">                            <div class="mui-half-circle"></div>                        </div>                        <div class="mui-spinner-right">                            <div class="mui-half-circle"></div>                        </div>                    </div>                </div>            </div>        </div>',B={top:0,x1:0,x2:0};t.resolve=function(){!g&&C&&(clearTimeout(C),C=null,a())},t.destroy=function(){c()},window.mRefresh=t}(Zepto||jQuery)}).call(this);